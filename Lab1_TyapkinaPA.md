## Лабораторная работа 2.1. Изучение методов хранения данных на основе NoSQL 

**Цель работы:** изучение и практическое применение трех различных типов NoSQL баз данных, а именно: документо-ориентированной MongoDB, графовой Neo4j и ключ-значение Redis. 
Оборудование и программное обеспечение:
  -	Операционная система Ubuntu
  -	Язык программирования Python (с библиотеками pymongo, redis, neo4j). CSV файлы с данными. 

### Краткая теоретическая справка

**NoSQL** — это подход к проектированию баз данных, которые не являются реляционными и могут использовать различные модели данных. Они оптимизированы для конкретных сценариев использования и обеспечивают высокую масштабируемость и гибкость. 
MongoDB документо-ориентированная СУБД. MongoDB хранит данные в гибких, JSON-подобных документах. Это означает, что поля могут варьироваться от документа к документу и структура данных может быть изменена со временем.
Основные концепции: 
  -	База данных (Database): контейнер для коллекций.
  -	Коллекция (Collection): аналог таблицы в реляционных СУБД. Хранит группу связанных документов, но не требует от них
  -	Документ (Document): аналог строки (записи) в реляционных СУБД. Представляет собой структуру данных в формате BSON (бинарный JSON).
  -	Поле (Field): аналог столбца, пара ключ-значение в документе.
  -	Ключевая особенность: гибкая схема, позволяющая хранить в одной коллекции документы с разным набором полей.

**Neo4j** — это графовая база данных, разработанная для хранения и обработки связанных данных. Она идеально подходит для анализа сложных взаимосвязей, 2 таких как социальные сети, рекомендательные системы и управление зависимостями.
Основные компоненты графовой модели: 
  -	Узлы (Nodes): представляют сущности (например, "Человек", "Фильм"). Аналогичны записям в реляционной таблице.
  -	Отношения (Relationships): представляют связи между узлами (например, ACTED_IN, DIRECTED). Отношения всегда имеют направление и тип.
  -	Свойства (Properties): пары ключ-значение, которые хранятся внутри узлов и отношений (например, name: 'Tom Hanks'). 
  -	Язык запросов: Cypher — декларативный язык для запросов к графу.

**Redis** (Remote Dictionary Server) — это высокопроизводительное хранилище данных в памяти, работающее по принципу "ключ-значение". Оно часто используется для кэширования, управления сессиями, очередей сообщений и в качестве брокера сообщений.
Основные структуры данных:
  -	Строки (Strings): простейший тип, где одному ключу соответствует одно строковое значение.
  -	Списки (Lists): последовательности строк, упорядоченные по порядку вставки.
  -	Множества (Sets): неупорядоченные коллекции уникальных строк
  -	Хэши (Hashes): структуры для хранения объектов, состоящие из полей и их значений.
  -	Упорядоченные множества (Sorted Sets): множества, где каждый элемент связан с числовым значением (оценкой), которое используется для сортировки.

**MongoDB**:
1.	Вход в Mongo Compass и создаем базу данных filmdb
  <img width="974" height="604" alt="image" src="https://github.com/user-attachments/assets/547976bd-44bd-4909-8d85-44112879571e" />

2. Загружаем данные с помощью ⊕ADD DATA → Insert document
  <img width="974" height="596" alt="image" src="https://github.com/user-attachments/assets/ea29bc85-db27-4cc4-b869-67e5df665f46" />
  <img width="974" height="609" alt="image" src="https://github.com/user-attachments/assets/44bdfb5d-6737-4d3d-9373-2670e80becb3" />

3. Индивидуальное задание: Найти все фильмы, название которых начинается с "The". Для них добавить поле last_updated с текущей датой ($currentDate).
  3.1. Переключаю в консоли бд с test на filmdb и вписываю код:
    <img width="648" height="459" alt="image" src="https://github.com/user-attachments/assets/3c4980e5-9cc2-4293-bb18-27838531d9e5" />

```
db.movies.updateMany(
  { "title": { $regex: /^The/ } },  // Фильтр: название начинается с "The"
  {
    $currentDate: {
      "last_updated": { $type: "date" }  // Добавляет поле с текущей датой
    }
  }
);
///updateMany — обновляет все документы, соответствующие условию.
///{ $regex: /^The/ } — регулярное выражение для поиска названий, начинающихся с "The" (регистрозависимо). Если нужен регистронезависимый поиск, используйте /^The/i.
///$currentDate — автоматически устанавливает текущую дату в формате ISODate.
```

  3.2. Проверка результата
    <img width="974" height="562" alt="image" src="https://github.com/user-attachments/assets/74e694ce-9075-4c8a-9e9d-f25eeea0b180" />

  3.3. Добавляем новые фильмы и проверяем вновь. После добавления новых фильмов проверяем ещё раз код:
    <img width="974" height="591" alt="image" src="https://github.com/user-attachments/assets/dced49a6-77be-4ebe-9722-bf3d9f37c374" />
    <img width="974" height="613" alt="image" src="https://github.com/user-attachments/assets/26d77581-1c8f-4ed1-a7c3-97a1f90ef88e" />
    Видим, что после добавления фильмов в коллекцию количество названий, начинающихся на “The” прибавилось.

В целях личного интереса выведем все фильмы, начинающиеся с “The” с помощью команды:
<img width="974" height="587" alt="image" src="https://github.com/user-attachments/assets/df5f066b-73c7-41df-b3db-22e14ff27927" />

```
db.movies.find({ "title": { $regex: /^The/i } })
```

**Redis:**
1.	Открыла Reddis Commander
   <img width="974" height="591" alt="image" src="https://github.com/user-attachments/assets/148aabc3-4862-4ce1-ad7a-e12dec75c0db" />
2.	Выполнил все шаги из GitHub:
   <img width="974" height="572" alt="image" src="https://github.com/user-attachments/assets/49022b6e-2a93-4d38-b268-f311816fabca" />
   <img width="974" height="608" alt="image" src="https://github.com/user-attachments/assets/2e4c9c3e-d0f4-4a0c-a527-b09ac60a2900" />
3. Индивидуальное задание: Смоделировать подписки на теги: для пользователя user:99 в множество user:99:tags добавить 3 тега. Удалить один из тегов (SREM).
  3.1.	Добавление 3 тегов для пользователя user:99

```
    SADD user:99:tags "programming" "technology" "databases"
```
    
  3.2.	Проверка добавленных тегов

```
    SMEMBERS user:99:tags
```
   
  3.3.	Удаление одного тега (например, "technology")
```
    SREM user:99:tags "technology"
```


  3.4.	Проверка результата после удаления
  
    SMEMBERS user:99:tags
